{% extends 'employees/base.html' %}
{% block content %}

<div class="card shadow-sm mb-4">

<div class="card-header bg-dark text-white d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Employee List</h5>


<form method="get" class="mb-3 d-flex gap-2" id="filterForm">
    <select name="department" class="form-select" style="width:auto;" onchange="document.getElementById('filterForm').submit()">
        <option value="All">All Departments</option>
        {% for  dept in departments %}
        <option value="{{dept}}" {% if dept == selected_department %}selected{% endif %}>{{ dept }}</option>
        {% endfor %}
    </select>
</form>

</div>

<div class="card-body p-0" >
    <div class="table-scroll">

<table class="table table-bordered table-hover mb-0 text-center align-middle table-sm">
    <thead class="table-light">
<tr>
    <th>#</th>
    <th>ID</th>
    <th>Name</th>
    <th>Email</th>
    <th>Department</th>
    <th>Salary</th>
    <th>Actions</th>
</tr>
</thead>

<tbody>
{% if employees %}
{% for employee in employees %}
<tr>
    <td>{{ forloop.counter }}</td>
    <td>{{ employee.id }}</td>
    <td class="truncate">{{ employee.name }}</td>
    <td class="truncate">{{ employee.email }}</td>
    <td class="truncate">{{ employee.department }}</td>
    <td>{{ employee.salary }}</td>
    <td>
        <a href="{% url 'employee_detail' employee.id %}" class="btn btn-info btn-sm mb-1 btn-fixed">View</a>
        <a href="{% url 'update_employee' employee.id %}" class="btn btn-warning btn-sm mb-1 btn-fixed">Edit</a>
        <a href="{% url 'delete_employee' employee.id %}" class="btn btn-danger btn-sm mb-1 btn-fixed" onclick="return confirm('Are you sure you want to mark this employee as INACTIVE?')">Delete</a>
    </td>
</tr>
{% endfor %}
{% else %}
<tr>
    <td colspan="8" class="text-center">No employees found.</td>
</tr>
{% endif %}
</tbody>
</table>

</div>
</div>

</div>

{% endblock %}